function makeRequest(e,t,a="POST",r="core/rcon.php"){let s=new XMLHttpRequest;s.open(a,r),s.onload=function(){4==this.readyState&&200==this.status&&t(JSON.parse(this.responseText))};let n=new FormData;for(let o in e)n.append(o,e[o]);s.send(n)}function get_players(sv){makeRequest({get_players:sv},function(resp){var myModal;document.getElementById("edamodal").innerHTML="<table class='table table table-bordered table-striped table-custom'><thead><tr><th scope='col'>#</th><th scope='col'>Имя</th><th scope='col'>Время на сервере</th><th scope='col'>Счёт</th></tr></thead><tbody id='sudalol'></tbody></table>",document.getElementById("staticBackdropLabel").innerHTML="Список игроков "+sv,new bootstrap.Modal(document.getElementById("atakda")).toggle();for(var row,i=0;row=resp[i];i++)row.Name=""!=row.Name?row.Name:"Подключается...",document.getElementById("sudalol").innerHTML+="<th scope='row'>"+eval(i+1)+"</th><td>"+row.Name+"</td><td>"+row.TimeF+"</td><td>"+row.Frags+"</td></tr>"})}function get_servers(){let e=document.getElementById("serverList");e&&makeRequest({get_servers},function(t){for(var a,r=0;a=t[r];r++)a.query=a.query??{map:"timeout",players:"err",playersmax:"err"},e.innerHTML+="<div class='card mb-3 hoverscale border-0 bggrad text-white' style='border-radius:20px; overflow: hidden;'><h3 class='fw-bold mt-1'>"+a.sv_name+"</h3><h5 style='margin-top: auto;'>карта: "+a.query.map+"</h5><div class='btn-group btn-sm mt-1 input-block-level' role='group'><button type='button' class='btn btn-light border-dark fw-bold bg-white btn-sm' onclick=\"get_players('"+a.sv_name+"')\">Игроки: "+a.query.players+"/"+a.query.playersmax+"</button><a type='button' href='steam://connect/"+a.sv_ip+":"+a.sv_port+"' class='btn btn btn-light border-dark fw-bold bg-white btn-sm'><i class='bi bi-plugin'></i> Подключиться</a><a type='button' class='btn btn btn-light border-dark fw-bold bg-white btn-sm' href='components/donate.php?sv="+a.sv_name+"'><i class='bi bi-bag-heart'></i> Пожертвование</button></div>"})}document.addEventListener("DOMContentLoaded",get_servers());