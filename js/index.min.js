function makeRequest(e="POST",t="core/rcon.php",r,a){let n=new XMLHttpRequest;n.open(e,t),n.onload=function(){4==this.readyState&&200==this.status&&a(JSON.parse(this.responseText))};let s=new FormData;for(let o in r)s.append(o,r[o]);n.send(s)}function get_players(sv){makeRequest(method="POST",url="core/rcon.php",{get_players:sv},function(resp){var myModal;document.getElementById("edamodal").innerHTML="<table class='table table table-bordered table-striped table-custom'><thead><tr><th scope='col'>#</th><th scope='col'>Имя</th><th scope='col'>Время на сервере</th><th scope='col'>Счёт</th></tr></thead><tbody id='sudalol'></tbody></table>",document.getElementById("staticBackdropLabel").innerHTML="Список игроков "+sv,new bootstrap.Modal(document.getElementById("atakda")).toggle();for(var row,i=0;row=resp[i];i++)row.Name=""!=row.Name?row.Name:"Подключается...",document.getElementById("sudalol").innerHTML+="<th scope='row'>"+eval(i+1)+"</th><td>"+row.Name+"</td><td>"+row.TimeF+"</td><td>"+row.Frags+"</td></tr>"})}function get_servers(){let e=document.getElementById("serverList");e&&makeRequest(method="POST",url="core/rcon.php",{get_servers},function(t){for(var r,a=0;r=t[a];a++)r.query=r.query??{map:"timeout",players:"err",playersmax:"err"},e.innerHTML+="<div class='card mb-3 hoverscale border-0 bggrad text-white' style='border-radius:20px; overflow: hidden;'><h3 class='fw-bold mt-1'>"+r.sv_name+"</h3><h5 style='margin-top: auto;'>карта: "+r.query.map+"</h5><div class='btn-group btn-sm mt-1 input-block-level' role='group'><button type='button' class='btn btn-light border-dark fw-bold bg-white btn-sm' onclick=\"get_players('"+r.sv_name+"')\">Игроки: "+r.query.players+"/"+r.query.playersmax+"</button><a type='button' href='steam://connect/"+r.sv_ip+":"+r.sv_port+"' class='btn btn btn-light border-dark fw-bold bg-white btn-sm'><i class='bi bi-plugin'></i> Подключиться</a><a type='button' class='btn btn btn-light border-dark fw-bold bg-white btn-sm' href='components/donate.php?sv="+r.sv_name+"'><i class='bi bi-bag-heart'></i> Пожертвование</button></div>"})}document.addEventListener("DOMContentLoaded",get_servers());